---
- hosts: all
  become: true
  gather_facts: False
  
  pre_tasks:

    - name: install python
      raw: test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)

    - name: gathering facts
      setup:

    - name: install aptitude [debian family]
      apt:
        name: aptitude
        state: present
      when: ansible_facts['os_family']|lower == 'debian'

    - name: upgrade all packages to latest version
      package:
        name: "*"
        state: latest
        update_cache: yes

  tasks:

    - include_role:
        name: pip

    - include_role:
        name: docker_ce

    - include_role:
        name: oasis_eval
